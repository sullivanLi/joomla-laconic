/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function(a){var c=a("#config"),d=a("#profile"),e=Joomla.submitbutton;Joomla.submitbutton=function(b){var c=a('form[name="adminForm"]');"style.save"==b?c.trigger("save",["save",b]):"style.save2copy"==b?c.trigger("save",["save-copy",b]):"style.apply"==b?c.trigger("save",["apply",b]):e(b)};c.closest("div.pane-sliders").before(c).remove();c.tabs();d.prependTo("#config li.Profiles").profiles('[data-profile="default"]');1200>a(window).width()&&a("div.tabs-box").addClass("small-screen");c.prev("ul.nav").append('<li class="version">Warp '+
c.data("warpversion")+"</li>");var j=a("#config ul.verify").hide();a("#config a.verify-link").bind("click",function(a){a.preventDefault();j.slideToggle()});var k=a("#config ul.systemcheck").hide();a("#config a.systemcheck-link").bind("click",function(a){a.preventDefault();k.slideToggle()});a('form[name="adminForm"]').bind("save",function(b,c,d){var f={},g=[];b=a(this);var h=a("#toolbar-"+c);h.addClass("saving");a("#config li.ignore > .field").find("input, select, textarea").each(function(){g.push(a(this).attr("name"))});
a.each(b.serializeArray(),function(c,b){-1<a.inArray(b.name,g)||(f[b.name]=b.value)});a.ajax({url:b.attr("action"),type:"post",data:a.extend(f,{option:"com_templates",tmpl:"warp-ajax"}),success:function(b){h.removeClass("saving");try{if(b=a.parseJSON(b),"success"!=b.message){alert("Save failed!");return}}catch(c){}e(d)}})})});
